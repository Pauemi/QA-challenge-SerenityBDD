webdriver {
  driver = "chrome"
  base.url = "https://www.saucedemo.com/"

  chrome.switches = [
    "--user-data-dir=/Users/pau/.serenity/chrome-profile",
    "--no-first-run",
    "--no-default-browser-check",
    "--incognito",
    "--disable-popup-blocking",
    "--disable-features=PasswordManagerOnboarding,PasswordLeakDetection,AutofillServerCommunication,AutofillEnableAccountWalletStorage,OptimizationHints",
    "--disable-extensions",
    "--disable-notifications",
    "--disable-infobars"
  ]

  chrome.preferences = {
    "credentials_enable_service": false,
    "profile.password_manager_enabled": false,
    "password_manager_leak_detection_enabled": false,
    "credentials_enable_autosignin": false,
    "autofill.credit_card_enabled": false,
    "autofill.profile_enabled": false
  }

  chrome.capabilities = {
    "goog:chromeOptions": {
      "excludeSwitches": ["enable-automation", "enable-logging"],
      "useAutomationExtension": false
    }
  }

  # Optional: run headless
  # chrome.switches += ["--headless=new"]
}

serenity {
  project.name = "Sauce Demo E2E"
  take.screenshots = FOR_EACH_ACTION
}
